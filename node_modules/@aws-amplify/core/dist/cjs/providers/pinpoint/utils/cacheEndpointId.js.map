{"version":3,"file":"cacheEndpointId.js","sources":["../../../../../src/providers/pinpoint/utils/cacheEndpointId.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cacheEndpointId = void 0;\nconst Cache_1 = require(\"../../../Cache\");\nconst getCacheKey_1 = require(\"./getCacheKey\");\n/**\n * Writes an endpoint id to a long-lived cache.\n *\n * @internal\n */\nconst cacheEndpointId = async (appId, category, endpointId) => {\n    const cacheKey = (0, getCacheKey_1.getCacheKey)(appId, category);\n    // Set a longer TTL to avoid endpoint id being deleted after the default TTL (3 days)\n    // Also set its priority to the highest to reduce its chance of being deleted when cache is full\n    const ttl = 1000 * 60 * 60 * 24 * 365 * 100; // 100 years\n    const expiration = new Date().getTime() + ttl;\n    return Cache_1.Cache.setItem(cacheKey, endpointId, {\n        expires: expiration,\n        priority: 1,\n    });\n};\nexports.cacheEndpointId = cacheEndpointId;\n"],"names":[],"mappings":";;AACA;AACA;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,eAAe,GAAG,KAAK,CAAC,CAAC;AACjC,MAAM,OAAO,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC1C,MAAM,aAAa,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC/C;AACA;AACA;AACA;AACA;AACA,MAAM,eAAe,GAAG,OAAO,KAAK,EAAE,QAAQ,EAAE,UAAU,KAAK;AAC/D,IAAI,MAAM,QAAQ,GAAG,IAAI,aAAa,CAAC,WAAW,EAAE,KAAK,EAAE,QAAQ,CAAC,CAAC;AACrE;AACA;AACA,IAAI,MAAM,GAAG,GAAG,IAAI,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,GAAG,GAAG,GAAG,CAAC;AAChD,IAAI,MAAM,UAAU,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,GAAG,GAAG,CAAC;AAClD,IAAI,OAAO,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,EAAE,UAAU,EAAE;AACvD,QAAQ,OAAO,EAAE,UAAU;AAC3B,QAAQ,QAAQ,EAAE,CAAC;AACnB,KAAK,CAAC,CAAC;AACP,CAAC,CAAC;AACF,OAAO,CAAC,eAAe,GAAG,eAAe;;"}