{"version":3,"file":"base.js","sources":["../../../../src/awsClients/cognitoIdentity/base.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildHttpRpcRequest = exports.getSharedHeaders = exports.defaultConfig = exports.cognitoIdentityTransferHandler = void 0;\nconst clients_1 = require(\"../../clients\");\nconst composeTransferHandler_1 = require(\"../../clients/internal/composeTransferHandler\");\nconst retry_1 = require(\"../../clients/middleware/retry\");\nconst Platform_1 = require(\"../../Platform\");\nconst detectFramework_1 = require(\"../../Platform/detectFramework\");\nconst amplifyUrl_1 = require(\"../../utils/amplifyUrl\");\n/**\n * The service name used to sign requests if the API requires authentication.\n */\nconst SERVICE_NAME = 'cognito-identity';\n/**\n * The endpoint resolver function that returns the endpoint URL for a given region.\n */\nconst endpointResolver = ({ region }) => ({\n    url: new amplifyUrl_1.AmplifyUrl(`https://cognito-identity.${region}.${(0, clients_1.getDnsSuffix)(region)}`),\n});\n/**\n * A Cognito Identity-specific middleware that disables caching for all requests.\n */\nconst disableCacheMiddlewareFactory = () => next => async function disableCacheMiddleware(request) {\n    request.headers['cache-control'] = 'no-store';\n    return next(request);\n};\n/**\n * A Cognito Identity-specific transfer handler that does NOT sign requests, and\n * disables caching.\n *\n * @internal\n */\nexports.cognitoIdentityTransferHandler = (0, composeTransferHandler_1.composeTransferHandler)(clients_1.unauthenticatedHandler, [disableCacheMiddlewareFactory]);\n/**\n * @internal\n */\nexports.defaultConfig = {\n    service: SERVICE_NAME,\n    endpointResolver,\n    retryDecider: (0, retry_1.getRetryDecider)(clients_1.parseJsonError),\n    computeDelay: retry_1.jitteredBackoff,\n    userAgentValue: (0, Platform_1.getAmplifyUserAgent)(),\n    cache: 'no-store',\n};\n(0, detectFramework_1.observeFrameworkChanges)(() => {\n    exports.defaultConfig.userAgentValue = (0, Platform_1.getAmplifyUserAgent)();\n});\n/**\n * @internal\n */\nconst getSharedHeaders = (operation) => ({\n    'content-type': 'application/x-amz-json-1.1',\n    'x-amz-target': `AWSCognitoIdentityService.${operation}`,\n});\nexports.getSharedHeaders = getSharedHeaders;\n/**\n * @internal\n */\nconst buildHttpRpcRequest = ({ url }, headers, body) => ({\n    headers,\n    url,\n    body,\n    method: 'POST',\n});\nexports.buildHttpRpcRequest = buildHttpRpcRequest;\n"],"names":[],"mappings":";;AACA;AACA;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,mBAAmB,GAAG,OAAO,CAAC,gBAAgB,GAAG,OAAO,CAAC,aAAa,GAAG,OAAO,CAAC,8BAA8B,GAAG,KAAK,CAAC,CAAC;AACjI,MAAM,SAAS,GAAG,OAAO,CAAC,eAAe,CAAC,CAAC;AAC3C,MAAM,wBAAwB,GAAG,OAAO,CAAC,+CAA+C,CAAC,CAAC;AAC1F,MAAM,OAAO,GAAG,OAAO,CAAC,gCAAgC,CAAC,CAAC;AAC1D,MAAM,UAAU,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AAC7C,MAAM,iBAAiB,GAAG,OAAO,CAAC,gCAAgC,CAAC,CAAC;AACpE,MAAM,YAAY,GAAG,OAAO,CAAC,wBAAwB,CAAC,CAAC;AACvD;AACA;AACA;AACA,MAAM,YAAY,GAAG,kBAAkB,CAAC;AACxC;AACA;AACA;AACA,MAAM,gBAAgB,GAAG,CAAC,EAAE,MAAM,EAAE,MAAM;AAC1C,IAAI,GAAG,EAAE,IAAI,YAAY,CAAC,UAAU,CAAC,CAAC,yBAAyB,EAAE,MAAM,CAAC,CAAC,EAAE,IAAI,SAAS,CAAC,YAAY,EAAE,MAAM,CAAC,CAAC,CAAC,CAAC;AACjH,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA,MAAM,6BAA6B,GAAG,MAAM,IAAI,IAAI,eAAe,sBAAsB,CAAC,OAAO,EAAE;AACnG,IAAI,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,GAAG,UAAU,CAAC;AAClD,IAAI,OAAO,IAAI,CAAC,OAAO,CAAC,CAAC;AACzB,CAAC,CAAC;AACF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,CAAC,8BAA8B,GAAG,IAAI,wBAAwB,CAAC,sBAAsB,EAAE,SAAS,CAAC,sBAAsB,EAAE,CAAC,6BAA6B,CAAC,CAAC,CAAC;AACjK;AACA;AACA;AACA,OAAO,CAAC,aAAa,GAAG;AACxB,IAAI,OAAO,EAAE,YAAY;AACzB,IAAI,gBAAgB;AACpB,IAAI,YAAY,EAAE,IAAI,OAAO,CAAC,eAAe,EAAE,SAAS,CAAC,cAAc,CAAC;AACxE,IAAI,YAAY,EAAE,OAAO,CAAC,eAAe;AACzC,IAAI,cAAc,EAAE,IAAI,UAAU,CAAC,mBAAmB,GAAG;AACzD,IAAI,KAAK,EAAE,UAAU;AACrB,CAAC,CAAC;AACF,IAAI,iBAAiB,CAAC,uBAAuB,EAAE,MAAM;AACrD,IAAI,OAAO,CAAC,aAAa,CAAC,cAAc,GAAG,IAAI,UAAU,CAAC,mBAAmB,GAAG,CAAC;AACjF,CAAC,CAAC,CAAC;AACH;AACA;AACA;AACA,MAAM,gBAAgB,GAAG,CAAC,SAAS,MAAM;AACzC,IAAI,cAAc,EAAE,4BAA4B;AAChD,IAAI,cAAc,EAAE,CAAC,0BAA0B,EAAE,SAAS,CAAC,CAAC;AAC5D,CAAC,CAAC,CAAC;AACH,OAAO,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;AAC5C;AACA;AACA;AACA,MAAM,mBAAmB,GAAG,CAAC,EAAE,GAAG,EAAE,EAAE,OAAO,EAAE,IAAI,MAAM;AACzD,IAAI,OAAO;AACX,IAAI,GAAG;AACP,IAAI,IAAI;AACR,IAAI,MAAM,EAAE,MAAM;AAClB,CAAC,CAAC,CAAC;AACH,OAAO,CAAC,mBAAmB,GAAG,mBAAmB;;"}