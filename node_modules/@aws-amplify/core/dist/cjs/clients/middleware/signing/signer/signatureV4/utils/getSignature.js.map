{"version":3,"file":"getSignature.js","sources":["../../../../../../../../src/clients/middleware/signing/signer/signatureV4/utils/getSignature.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getSignature = void 0;\nconst dataHashHelpers_1 = require(\"./dataHashHelpers\");\nconst getCanonicalRequest_1 = require(\"./getCanonicalRequest\");\nconst getSigningKey_1 = require(\"./getSigningKey\");\nconst getStringToSign_1 = require(\"./getStringToSign\");\n/**\n * Calculates and returns an AWS API Signature.\n * https://docs.aws.amazon.com/IAM/latest/UserGuide/create-signed-request.html\n *\n * @param request `HttpRequest` to be signed.\n * @param signRequestOptions `SignRequestOptions` object containing values used to construct the signature.\n * @returns AWS API Signature to sign a request or url with.\n *\n * @internal\n */\nconst getSignature = (request, { credentialScope, longDate, secretAccessKey, shortDate, signingRegion, signingService, uriEscapePath, }) => {\n    // step 1: create a canonical request\n    const canonicalRequest = (0, getCanonicalRequest_1.getCanonicalRequest)(request, uriEscapePath);\n    // step 2: create a hash of the canonical request\n    const hashedRequest = (0, dataHashHelpers_1.getHashedDataAsHex)(null, canonicalRequest);\n    // step 3: create a string to sign\n    const stringToSign = (0, getStringToSign_1.getStringToSign)(longDate, credentialScope, hashedRequest);\n    // step 4: calculate the signature\n    const signature = (0, dataHashHelpers_1.getHashedDataAsHex)((0, getSigningKey_1.getSigningKey)(secretAccessKey, shortDate, signingRegion, signingService), stringToSign);\n    return signature;\n};\nexports.getSignature = getSignature;\n"],"names":[],"mappings":";;AACA;AACA;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,YAAY,GAAG,KAAK,CAAC,CAAC;AAC9B,MAAM,iBAAiB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACvD,MAAM,qBAAqB,GAAG,OAAO,CAAC,uBAAuB,CAAC,CAAC;AAC/D,MAAM,eAAe,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACnD,MAAM,iBAAiB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM,YAAY,GAAG,CAAC,OAAO,EAAE,EAAE,eAAe,EAAE,QAAQ,EAAE,eAAe,EAAE,SAAS,EAAE,aAAa,EAAE,cAAc,EAAE,aAAa,GAAG,KAAK;AAC5I;AACA,IAAI,MAAM,gBAAgB,GAAG,IAAI,qBAAqB,CAAC,mBAAmB,EAAE,OAAO,EAAE,aAAa,CAAC,CAAC;AACpG;AACA,IAAI,MAAM,aAAa,GAAG,IAAI,iBAAiB,CAAC,kBAAkB,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAC;AAC5F;AACA,IAAI,MAAM,YAAY,GAAG,IAAI,iBAAiB,CAAC,eAAe,EAAE,QAAQ,EAAE,eAAe,EAAE,aAAa,CAAC,CAAC;AAC1G;AACA,IAAI,MAAM,SAAS,GAAG,IAAI,iBAAiB,CAAC,kBAAkB,EAAE,IAAI,eAAe,CAAC,aAAa,EAAE,eAAe,EAAE,SAAS,EAAE,aAAa,EAAE,cAAc,CAAC,EAAE,YAAY,CAAC,CAAC;AAC7K,IAAI,OAAO,SAAS,CAAC;AACrB,CAAC,CAAC;AACF,OAAO,CAAC,YAAY,GAAG,YAAY;;"}