{"version":3,"file":"cancelOAuthFlow.js","sources":["../../../../../../src/providers/cognito/utils/oauth/cancelOAuthFlow.ts"],"sourcesContent":["\"use strict\";\n// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.listenForOAuthFlowCancellation = void 0;\nconst createOAuthError_1 = require(\"./createOAuthError\");\nconst handleFailure_1 = require(\"./handleFailure\");\nconst listenForOAuthFlowCancellation = (store) => {\n    async function handleCancelOAuthFlow(event) {\n        const isBfcache = event.persisted;\n        if (isBfcache && (await store.loadOAuthInFlight())) {\n            const error = (0, createOAuthError_1.createOAuthError)('User cancelled OAuth flow.');\n            await (0, handleFailure_1.handleFailure)(error);\n        }\n        window.removeEventListener('pageshow', handleCancelOAuthFlow);\n    }\n    window.addEventListener('pageshow', handleCancelOAuthFlow);\n};\nexports.listenForOAuthFlowCancellation = listenForOAuthFlowCancellation;\n"],"names":[],"mappings":";;AACA;AACA;AACA,MAAM,CAAC,cAAc,CAAC,OAAO,EAAE,YAAY,EAAE,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;AAC9D,OAAO,CAAC,8BAA8B,GAAG,KAAK,CAAC,CAAC;AAChD,MAAM,kBAAkB,GAAG,OAAO,CAAC,oBAAoB,CAAC,CAAC;AACzD,MAAM,eAAe,GAAG,OAAO,CAAC,iBAAiB,CAAC,CAAC;AACnD,MAAM,8BAA8B,GAAG,CAAC,KAAK,KAAK;AAClD,IAAI,eAAe,qBAAqB,CAAC,KAAK,EAAE;AAChD,QAAQ,MAAM,SAAS,GAAG,KAAK,CAAC,SAAS,CAAC;AAC1C,QAAQ,IAAI,SAAS,KAAK,MAAM,KAAK,CAAC,iBAAiB,EAAE,CAAC,EAAE;AAC5D,YAAY,MAAM,KAAK,GAAG,IAAI,kBAAkB,CAAC,gBAAgB,EAAE,4BAA4B,CAAC,CAAC;AACjG,YAAY,MAAM,IAAI,eAAe,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;AAC5D,SAAS;AACT,QAAQ,MAAM,CAAC,mBAAmB,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC;AACtE,KAAK;AACL,IAAI,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,qBAAqB,CAAC,CAAC;AAC/D,CAAC,CAAC;AACF,OAAO,CAAC,8BAA8B,GAAG,8BAA8B;;"}